(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{188:function(e,t,r){e.exports={static:"BookEditRC_static__DhUTB"}},217:function(e,t,r){e.exports={registeredBooks:"AdminBooksMain_registeredBooks__1T_JL"}},223:function(e,t,r){e.exports={footer:"Footer_footer__1Qeoj"}},224:function(e,t,r){e.exports={contentStyle:"HomeScreen_contentStyle__qmpm9"}},225:function(e,t,r){e.exports={imageModal:"UserBooksMain_imageModal__Q0x2D",registeredBooks:"UserBooksMain_registeredBooks__1PBCj"}},354:function(e,t,r){},355:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(36),i=r.n(a),s=r(7),o=r(2),c=Object(n.createContext)(),l=function(e){var t=Object(n.useState)(),r=Object(s.a)(t,2),a=r[0],i=r[1];return Object(o.jsx)(c.Provider,{value:{isLogin:a,setIsLogin:i},children:e.children})},u=Object(n.createContext)(),d=function(e){var t=JSON.parse(localStorage.getItem("biblioteca-app")),r=Object(n.useState)(t),a=Object(s.a)(r,2),i=a[0],c=a[1];return Object(o.jsx)(u.Provider,{value:{user:i,setUser:c},children:e.children})},b=r(76),j=r(38),m=r(360),h=r(215),f=r(361),x=r(130),p=r(132),O=function(){var e=Object(j.f)(),t=Object(n.useContext)(c).setIsLogin;return Object(o.jsx)(m.a,{bg:"light",expand:"lg",fixed:"top",children:Object(o.jsxs)(h.a,{children:[Object(o.jsxs)(m.a.Brand,{id:"brand-text",children:[Object(o.jsx)("img",{src:"/libro-menu.jpeg",alt:"Imagen de libro abierto",width:"60",height:"40",className:"d-inline-block align-middle"})," ",Object(o.jsx)("b",{children:"Biblioteca Virtual"})]}),Object(o.jsx)(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(o.jsxs)(m.a.Collapse,{id:"basic-navbar-nav",children:[Object(o.jsxs)(f.a,{className:"me-auto",children:[Object(o.jsxs)(f.a.Link,{onClick:function(){return e.push("/")},children:[Object(o.jsx)(x.a,{icon:p.b,className:"me-2"}),"Home"]}),Object(o.jsxs)(f.a.Link,{onClick:function(){return e.push("/user/books")},children:[Object(o.jsx)(x.a,{icon:p.a,className:"me-2"}),"Ver libros"]})]}),Object(o.jsxs)(f.a,{children:[Object(o.jsxs)(f.a.Link,{onClick:function(){t(!1),e.push("/register")},children:[Object(o.jsx)(x.a,{icon:p.d,className:"me-2"}),"Registro"]}),Object(o.jsxs)(f.a.Link,{onClick:function(){t(!0),e.push("/login")},children:[Object(o.jsx)(x.a,{icon:p.c,className:"me-2"}),"Login"]})]})]})]})})},A=r(25),g=r.n(A),v=r(1),k=r(37),I=(r(194),r(363)),C=r(357),y=r(358),w=r(55),S=r(368),N=r(359),E=r(187),B=r.n(E),T="http://localhost:8000/api",F="biblioteca-app",P=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n="".concat(T,"/").concat(e);return B()({method:r,url:n,data:t})},M=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n="".concat(T,"/").concat(e),a=JSON.parse(localStorage.getItem(F)).token||"";return B()({method:r,url:n,data:t,headers:{"Content-type":"application/json","x-token":a}})},U=r(370),Q=r(371),D="data:image/gif;base64,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",L=r(34),K=r.n(L),q=function(){return Date.now().toString(36)+Math.random().toString(36).substr(2)},G=function(e,t){var r=new Set(e.map((function(e){return e[t]})));return Array.from(r)},H=r(217),z=r.n(H),J=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),r=t[0],a=t[1],i=Object(n.useState)(!1),c=Object(s.a)(i,2),l=c[0],d=c[1],b=Object(n.useContext)(u),m=b.user,h=b.setUser,f=Object(n.useState)(1),x=Object(s.a)(f,2),p=x[0],O=x[1],A=Object(n.useState)(6),E=Object(s.a)(A,2),B=E[0],T=E[1],F=Object(j.f)(),P=function(){var e=Object(k.a)(g.a.mark((function e(){var t,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M("books");case 3:t=e.sent,console.log("Todos los libros",t.data),r=t.data.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{key:q()})})),a(r),d(!0),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error al consultar todos los libros"),console.log("error",e.t0),401===e.t0.response.status&&(K.a.fire({icon:"error",title:"Su sesi\xf3n ha expirado. Debe volver a iniciar sesi\xf3n.",showConfirmButton:!1,timer:2e3}),setTimeout((function(){H()}),2100));case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(k.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.a.fire({icon:"warning",title:"\xbfSeguro que quiere borrar el libro <strong>".concat(t.title,"</strong>?"),showDenyButton:!0,denyButtonText:"Mejor no",confirmButtonText:"S\xed"}).then((function(e){e.isConfirmed?(K.a.fire("\xa1Borrado!","","success"),M("book/delete/".concat(t._id),{},"DELETE"),a(r.filter((function(e){return e._id!==t._id})))):e.isDenied&&K.a.fire("No se borrar\xe1","","info")}));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Error al borrar",e.t0),401===e.t0.response.status&&(K.a.fire({icon:"error",title:"Su sesi\xf3n ha expirado. Debe volver a iniciar sesi\xf3n.",showConfirmButton:!1,timer:2e3}),setTimeout((function(){H()}),2100));case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){m&&"admin"===m.role?P():F.push("/login")}),[]);var H=function(){h(null),localStorage.removeItem("biblioteca-app"),F.push("/login")},J=[{key:q(),title:"Autor",dataIndex:"author",filters:G(r,"author").map((function(e){return{text:e,value:e}})),onFilter:function(e,t){return 0===t.author.indexOf(e)}},{key:q(),title:"T\xedtulo",dataIndex:"title",filters:G(r,"title").map((function(e){return{text:e,value:e}})),onFilter:function(e,t){return 0===t.title.indexOf(e)}},{key:q(),title:"A\xf1o",dataIndex:"year",sorter:function(e,t){return e.year-t.year}},{key:q(),title:"Editorial",dataIndex:"publisher",filters:G(r,"publisher").map((function(e){return{text:e,value:e}})),onFilter:function(e,t){return 0===t.publisher.indexOf(e)}},{key:q(),title:"G\xe9nero",dataIndex:"subject",filters:G(r,"subject").map((function(e){return{text:e,value:e}})),onFilter:function(e,t){return 0===t.subject.indexOf(e)}},{key:q(),title:"N.\xba de p\xe1gs.",dataIndex:"numberOfPages",align:"right",sorter:function(e,t){return e.numberOfPages-t.numberOfPages}},{key:q(),title:"Img",dataIndex:"bookImageUrl",render:function(e){return Object(o.jsx)(I.a,{height:60,src:e||D})}},{key:q(),title:"Acciones",render:function(e){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(U.a,{style:{color:"#F18F01",marginLeft:5,fontSize:18},onClick:function(){return F.push("/admin/book/edit/".concat(e._id))}}),Object(o.jsx)(Q.a,{style:{color:"#E63F32",marginLeft:16,fontSize:18},onClick:function(){L(e)}})]})}}];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(C.a,{justify:"center",children:Object(o.jsxs)(y.a,{span:22,children:[Object(o.jsxs)("p",{className:"text-end",children:["Hola, ",null===m||void 0===m?void 0:m.firstName]}),Object(o.jsx)(w.a,{type:"primary",danger:!0,className:"float-end",onClick:H,children:"Cerrar sesi\xf3n"}),Object(o.jsx)("br",{}),Object(o.jsx)(w.a,{type:"primary",className:"d-block",onClick:function(){return F.push("/admin/book/new")},children:"Registrar un libro"})]})}),Object(o.jsx)(C.a,{justify:"center",children:Object(o.jsxs)(y.a,{span:22,children:[Object(o.jsx)("h2",{className:"text-center",children:"Libros disponibles"}),l&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{className:z.a.registeredBooks,children:"Total de libros registrados"}),Object(o.jsx)(S.a,{count:r.length,showZero:!0})]}),Object(o.jsx)(N.a,{columns:J,dataSource:r,onChange:function(e,t,r){console.log("Table params",e,t,r)},pagination:{showSizeChanger:!0,current:p,pageSize:B,onChange:function(e,t){O(e),T(t)}}})]})]})})]})},R=r(128),Y=r(362),W=r(228),V=r(364),Z=R.a.Option,X={labelCol:{span:6},wrapperCol:{span:14}},_=function(e){console.log("Failed:",e)},$=function(e){var t=e.processSubmit,r=e.initialValues,n=e.titleButton,a=Y.a.useForm(),i=Object(s.a)(a,1)[0];return Object(o.jsx)(C.a,{children:Object(o.jsx)(y.a,{span:22,className:"border rounded mx-auto pb-2 pt-4 light-background",children:Object(o.jsxs)(Y.a,Object(v.a)(Object(v.a)({form:i,name:"validate_other"},X),{},{onFinish:t,initialValues:r,onFinishFailed:_,children:[Object(o.jsx)(Y.a.Item,{label:"Autor del libro",name:"author",rules:[{type:"string",required:!0,message:"Por favor, ingrese el autor del libro"}],children:Object(o.jsx)(W.a,{placeholder:"J. K. Rowling"})}),Object(o.jsx)(Y.a.Item,{label:"T\xedtulo del libro",name:"title",rules:[{type:"string",required:!0,message:"Por favor, ingrese el t\xedtulo del libro"}],children:Object(o.jsx)(W.a,{placeholder:"Harry Potter y la piedra filosofal"})}),Object(o.jsx)(Y.a.Item,{label:"A\xf1o de publicaci\xf3n",children:Object(o.jsx)(Y.a.Item,{name:"year",rules:[{type:"number",required:!0,message:"Por favor, ingrese el a\xf1o de la publicaci\xf3n"}],children:Object(o.jsx)(V.a,{min:1500,max:2100,placeholder:"2020"})})}),Object(o.jsx)(Y.a.Item,{label:"Editorial",name:"publisher",rules:[{type:"string",required:!0,message:"Por favor, ingrese la editorial"}],children:Object(o.jsx)(W.a,{placeholder:"Salamandra"})}),Object(o.jsx)(Y.a.Item,{label:"G\xe9nero literario",name:"subject",rules:[{required:!0,message:"Por favor, ingrese un g\xe9nero literario"}],children:Object(o.jsxs)(R.a,{children:[Object(o.jsx)(Z,{value:"",children:"Seleccione un g\xe9nero literario..."}),Object(o.jsx)(Z,{value:"Suspenso",children:"Suspenso"}),Object(o.jsx)(Z,{value:"Acci\xf3n",children:"Acci\xf3n"}),Object(o.jsx)(Z,{value:"Historia",children:"Historia"}),Object(o.jsx)(Z,{value:"Ficci\xf3n",children:"Ficci\xf3n"}),Object(o.jsx)(Z,{value:"Autoayuda",children:"Autoayuda"}),Object(o.jsx)(Z,{value:"Literatura",children:"Literatura"}),Object(o.jsx)(Z,{value:"Drama",children:"Drama"}),Object(o.jsx)(Z,{value:"Novela",children:"Novela"})]})}),Object(o.jsx)(Y.a.Item,{label:"N\xfamero de p\xe1ginas",children:Object(o.jsx)(Y.a.Item,{name:"numberOfPages",rules:[{type:"number",required:!0,message:"Por favor, ingrese la cantidad de p\xe1ginas"}],children:Object(o.jsx)(V.a,{min:0,max:2e3,placeholder:"345"})})}),Object(o.jsx)(Y.a.Item,{label:"Img url del libro",name:"bookImageUrl",rules:[{type:"url",message:"Por favor, ingrese una URL v\xe1lida"}],children:Object(o.jsx)(W.a,{})}),Object(o.jsx)(Y.a.Item,{wrapperCol:{span:12,offset:6},children:Object(o.jsx)(w.a,{type:"primary",htmlType:"submit",children:n})})]}))})})},ee=function(){var e=Object(j.f)(),t=Object(n.useState)(!1),r=Object(s.a)(t,2),a=r[0],i=r[1],c=Object(n.useContext)(u),l=c.user,d=c.setUser,b=Object(n.useState)({author:"",title:"",year:"",publisher:"",subject:"",numberOfPages:"",bookImageUrl:""}),m=Object(s.a)(b,2),h=m[0],f=m[1],x=Object(j.h)().id,p=function(){var e=Object(k.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M("book/".concat(x));case 3:t=e.sent,console.log("Data del libro de axios",t.data),f(t.data),i(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error al obtener un libro por su ID",e.t0),401===e.t0.response.status&&(K.a.fire({icon:"error",title:"Su sesi\xf3n ha expirado. Debe volver a iniciar sesi\xf3n.",showConfirmButton:!1,timer:2e3}),setTimeout((function(){I()}),2100));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var t=Object(k.a)(g.a.mark((function t(r){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Values adentro del newBook",r),t.prev=1,t.next=4,M("book/create",Object(v.a)(Object(v.a)({},r),{},{adminId:l._id}),"POST");case 4:K.a.fire({icon:"success",title:"Libro registrado con \xe9xito",showConfirmButton:!1,timer:2e3}),setTimeout((function(){e.push("/admin/books")}),2100),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),K.a.fire({icon:"error",title:"Error",text:t.t0.response.data.message,confirmButtonText:"Aceptar"}),401===t.t0.response.status&&(K.a.fire({icon:"error",title:"Su sesi\xf3n ha expirado. Debe volver a iniciar sesi\xf3n.",showConfirmButton:!1,timer:2e3}),setTimeout((function(){I()}),2100));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),A=function(){var t=Object(k.a)(g.a.mark((function t(r){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M("book/update/".concat(x),r,"PUT");case 3:n=t.sent,console.log("Respuesta al actualizar libro",n),K.a.fire({icon:"success",title:"El libro fue modificado",showConfirmButton:!1,timer:2e3}),setTimeout((function(){e.push("/admin/books")}),2100),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("Error al modificar el libro",t.t0),401===t.t0.response.status&&(K.a.fire({icon:"error",title:"Su sesi\xf3n ha expirado. Debe volver a iniciar sesi\xf3n.",showConfirmButton:!1,timer:2e3}),setTimeout((function(){I()}),2100));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){l||e.push("/login")}),[l,e]),Object(n.useEffect)((function(){var e=function(){var e=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=5;break}return e.next=3,p();case 3:e.next=6;break;case 5:i(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[x]);var I=function(){d(null),localStorage.removeItem("biblioteca-app"),e.push("/login")};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(C.a,{justify:"center",children:Object(o.jsxs)(y.a,{span:22,children:[Object(o.jsxs)("p",{className:"text-end",children:["Hola, ",null===l||void 0===l?void 0:l.firstName]}),Object(o.jsx)(w.a,{type:"primary",danger:!0,className:"float-end",onClick:I,children:"Cerrar sesi\xf3n"}),Object(o.jsx)("br",{}),Object(o.jsx)(w.a,{type:"primary",className:"d-block",onClick:function(){return e.push("/admin/books")},children:"Lista de libros"})]})}),Object(o.jsx)(C.a,{justify:"center",children:Object(o.jsx)(y.a,{span:16,children:a&&"admin"===(null===l||void 0===l?void 0:l.role)?Object(o.jsx)($,{processSubmit:void 0!==x?A:O,initialValues:h,titleButton:void 0!==x?"Actualizar":"Crear"}):Object(o.jsx)("h1",{children:"No tiene rol de administrador"})})})]})},te=r(222),re=r(223),ne=r.n(re),ae=r(372),ie=r(373),se=r(374),oe=function(){return Object(o.jsx)("div",{className:ne.a.footer,children:Object(o.jsxs)("footer",{children:[Object(o.jsxs)("div",{className:"container",children:[Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col-sm-12 col-md-6",children:[Object(o.jsx)("h6",{children:"Sobre Nosotros"}),Object(o.jsx)("p",{children:"Aqu\xed encontrar\xe1s informaci\xf3n \xfatil relacionada con los libros que est\xe1n en tendencia, lo m\xe1s demandados, los que te llevan a so\xf1ar, enamorarte y vivir una vida de fantas\xeda mientras los lees. D\xe9jate guiar a trav\xe9s de las recomendaciones hechas por nuestros usuarios."})]}),Object(o.jsxs)("div",{className:"col-md-3 mx-auto mt-0",children:[Object(o.jsx)("h6",{children:"S\xedguenos en nuestras redes"}),Object(o.jsx)("p",{children:Object(o.jsx)("a",{href:"/",children:Object(o.jsx)(ae.a,{className:"fs-4"})})}),Object(o.jsx)("p",{children:Object(o.jsx)("a",{href:"/",children:Object(o.jsx)(ie.a,{className:"fs-4"})})}),Object(o.jsx)("p",{children:Object(o.jsx)("a",{href:"/",children:Object(o.jsx)(se.a,{className:"fs-4"})})})]})]}),Object(o.jsx)("hr",{})]}),Object(o.jsx)("div",{className:"container text-center",children:Object(o.jsx)("p",{children:"Copyright \xa9 2021"})})]})})},ce=r(365),le=r(367),ue=r(224),de=r.n(ue),be=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),r=t[0],a=t[1],i=function(){var e=Object(k.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P("books/homescreen/crs");case 3:t=e.sent,a(t.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error al obtener comentario/rating del libro",e.t0),K.a.fire({icon:"error",title:"Error al traerse los comentarios/rating",showConfirmButton:!1,timer:2e3});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){i()}),[]);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(ce.a,{autoplay:!0,effect:"fade",children:function(){var e,t,n,a=[],i=Object(te.a)(r);try{for(i.s();!(e=i.n()).done;){var s=e.value;if(s.comments.length>0){var o=(t=0,n=s.comments.length,t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t)+t));a.push({title:s.title,comment:s.comments[o].comment,rating:s.comments[o].rating,image:s.bookImageUrl})}}}catch(c){i.e(c)}finally{i.f()}return a}().map((function(e){return Object(o.jsx)("div",{children:Object(o.jsxs)("ul",{className:de.a.contentStyle,children:[Object(o.jsxs)("li",{style:{listStyle:"none"},children:[" ",Object(o.jsxs)("span",{style:{fontSize:"1.5rem",lineHeight:"3rem"},children:[" ",e.title]})," "]}),Object(o.jsx)("li",{style:{listStyle:"none"},children:Object(o.jsx)("img",{src:e.image?e.image:D,alt:"Imagen del libro ".concat(e.title),style:{height:"180px",margin:"0 auto"}})}),Object(o.jsxs)("li",{style:{listStyle:"none"},children:[Object(o.jsx)(le.a,{allowHalf:!0,disabled:!0,defaultValue:e.rating})," "]}),Object(o.jsxs)("li",{style:{listStyle:"none"},children:['"',Object(o.jsxs)("em",{style:{fontSize:"1.2rem"},children:[e.comment," "]}),'"']})]})},q())}))}),Object(o.jsx)(oe,{})]})},je=r(117),me=r(375),he=r(376),fe=function(e){var t=e.titleSubmitButton,r=Object(n.useState)(!1),a=Object(s.a)(r,2),i=a[0],l=a[1],d=Y.a.useForm(),b=Object(s.a)(d,1)[0],m=Object(n.useContext)(c),h=m.isLogin,f=m.setIsLogin,x=Object(n.useContext)(u).setUser,p=Object(j.f)(),O=function(){var e=Object(k.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.secretPhrase){e.next=7;break}return delete t.secretPhrase,e.next=5,P("auth/register",Object(v.a)(Object(v.a)({},t),{},{role:"admin"}),"POST");case 5:e.next=8;break;case 7:P("auth/register",t,"POST");case 8:K.a.fire({icon:"success",title:"<strong>".concat(t.firstName,"</strong> se registr\xf3 exitosamente. Por favor, inicie sesi\xf3n"),showConfirmButton:!0,confirmButtonText:"Ok"}).then((function(e){e.isConfirmed&&(f(!0),p.push("/login"))})),b.resetFields(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),K.a.fire({icon:"error",title:"Oops...",html:'<ul class="swal-list">'.concat(e.t0.response.data.map((function(e){return"<li>".concat(e,"</li>")})),"</ul>"),confirmButtonText:"Lo arreglar\xe9!"});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(k.a)(g.a.mark((function e(t){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P("auth/login",t,"POST");case 3:r=e.sent,x(r.data),localStorage.setItem("biblioteca-app",JSON.stringify(r.data)),K.a.fire({icon:"success",title:"Inici\xf3 de sesi\xf3n exitosa!",showConfirmButton:!1,timer:2400}),setTimeout((function(){"admin"===r.data.role?p.push("/admin/books"):p.push("/user/books")}),2500),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),K.a.fire({icon:"error",title:"Oops... usario o contrase\xf1a incorrecta",confirmButtonText:"Lo revisar\xe9!"});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsx)(C.a,{children:Object(o.jsx)(y.a,{span:18,className:"mx-auto pb-2 pt-4",children:Object(o.jsxs)(Y.a,Object(v.a)(Object(v.a)({form:b},{labelCol:{span:10},wrapperCol:{span:16}}),{},{onFinish:h?A:O,initialValues:{firstName:"",lastName:"",email:"",password:"",passwordConfirmation:""},onFinishFailed:function(e){console.log("Failed:",e)},children:[h?null:Object(o.jsx)(Y.a.Item,{label:"Nombre",name:"firstName",rules:[{type:"string",required:!0,message:"Por favor, ingrese su nombre"},{min:3,message:"M\xednimo 3 caracteres"}],children:Object(o.jsx)(W.a,{placeholder:"John"})}),h?null:Object(o.jsx)(Y.a.Item,{label:"Apellido",name:"lastName",rules:[{type:"string",required:!0,message:"Por favor, ingrese su apellido"},{min:3,message:"M\xednimo 3 caracteres"}],children:Object(o.jsx)(W.a,{placeholder:"Wick"})}),Object(o.jsx)(Y.a.Item,{label:"Correo electr\xf3nico",name:"email",rules:[{type:"email",required:!0,message:"Por favor, ingrese un email v\xe1lido"}],children:h?Object(o.jsx)(W.a,{prefix:Object(o.jsx)(me.a,{className:"site-form-item-icon"}),placeholder:"correo@dominio.com"}):Object(o.jsx)(W.a,{placeholder:"correo@dominio.com"})}),Object(o.jsx)(Y.a.Item,{label:"Contrase\xf1a",name:"password",rules:[{required:!0,message:"Por favor, ingrese su contrase\xf1a"},{min:6,message:"M\xednimo 6 caracteres"}],hasFeedback:!0,children:h?Object(o.jsx)(W.a.Password,{prefix:Object(o.jsx)(he.a,{className:"site-form-item-icon"})}):Object(o.jsx)(W.a.Password,{})}),h?null:Object(o.jsx)(Y.a.Item,{name:"passwordConfirmation",label:"Confirmar contrase\xf1a",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Por favor, confirme su contrase\xf1a"},function(e){var t=e.getFieldValue;return{validator:function(e,r){return r&&t("password")!==r?Promise.reject(new Error("Las contrase\xf1as ingresadas no coinciden")):Promise.resolve()}}}],children:Object(o.jsx)(W.a.Password,{})}),h?null:Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(Y.a.Item,Object(v.a)(Object(v.a)({name:"admin",valuePropName:"checked"},{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}}),{},{children:Object(o.jsx)(je.a,{onChange:function(e){!0!==e.target.checked||h?l(!1):l(!0)},children:"Quiero registrarme como admin"})}))}),i&&!h?Object(o.jsx)(Y.a.Item,{label:"Secreto",name:"secretPhrase",rules:[{validator:function(e,t){return"QuieroSerAdmin"===t?Promise.resolve():Promise.reject(new Error("Secreto incorrecto para ser admin"))}}],children:Object(o.jsx)(W.a.Password,{placeholder:"Ingrese el secreto para ser admin"})}):null,Object(o.jsx)(w.a,{type:"primary",htmlType:"submit",className:"mb-3",children:t}),Object(o.jsx)("br",{}),Object(o.jsxs)(w.a,{onClick:function(){h?(f(!1),p.push("/register")):(f(!0),p.push("/login"))},children:["Ir al ",h?"registro":"login"]})]}))})})},xe=function(){var e=Object(n.useContext)(c),t=e.isLogin,r=e.setIsLogin,a=Object(n.useContext)(u).user,i=Object(j.g)(),s=Object(j.f)();return Object(n.useEffect)((function(){"admin"===(null===a||void 0===a?void 0:a.role)?s.push("/admin/books"):"basic"===(null===a||void 0===a?void 0:a.role)&&s.push("/user/books"),"/register"===i.pathname?r(!1):r(!0)}),[]),Object(o.jsx)(h.a,{className:"m-3 w-75 mx-auto",children:Object(o.jsx)(C.a,{children:Object(o.jsxs)(y.a,{span:14,className:"border rounded bg-light mx-auto pb-2 pt-4",children:[t?Object(o.jsx)("h2",{className:"text-center",children:"Login"}):Object(o.jsx)("h2",{className:"text-center",children:"Registro"}),Object(o.jsx)(fe,{titleSubmitButton:t?"Login":"Registro"})]})})})},pe=r(188),Oe=r.n(pe),Ae=function(e){console.log("Failed:",e)},ge=function(e){var t=e.processSubmit,r=e.initialValues,n=e.titleButton,a=Y.a.useForm(),i=Object(s.a)(a,1)[0];return Object(o.jsxs)("div",{className:"border rounded mx-auto pb-2 pt-4 light-background w-50 d-flex flex-column align-items-center",children:[Object(o.jsxs)("div",{className:Oe.a.static,children:[Object(o.jsx)("img",{src:r.bookImageUrl?r.bookImageUrl:D,alt:"portada del libro ".concat(r.title)}),Object(o.jsxs)("p",{children:["Autor: ",r.author]}),Object(o.jsxs)("p",{children:["T\xedtulo: ",r.title]})]}),Object(o.jsx)(C.a,{children:Object(o.jsx)(y.a,{className:Oe.a.centrar,children:Object(o.jsxs)(Y.a,{form:i,name:"validate_other",onFinish:t,initialValues:{rating:r.rating,comment:r.comment},onFinishFailed:Ae,children:[Object(o.jsx)(Y.a.Item,{name:"rating",label:"Valoraci\xf3n",children:Object(o.jsx)(le.a,{allowHalf:!0})}),Object(o.jsx)(Y.a.Item,{name:["comment"],children:Object(o.jsx)(W.a.TextArea,{placeholder:"Deja un comentario al libro...",showCount:!0,maxLength:400,style:{width:600}})}),Object(o.jsx)(Y.a.Item,{wrapperCol:{span:12,offset:10},children:Object(o.jsx)(w.a,{type:"primary",htmlType:"submit",children:n})})]})})})]})},ve=function(){var e=Object(j.f)(),t=Object(n.useState)(!1),r=Object(s.a)(t,2),a=r[0],i=r[1],c=Object(n.useContext)(u),l=c.user,d=c.setUser,b=Object(n.useState)({}),m=Object(s.a)(b,2),h=m[0],f=m[1],x=Object(j.h)().id,p=function(){var e=Object(k.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M("cr/book/user/".concat(x));case 3:t=e.sent,console.log("Data de comentarios/rating de axios",t.data),f(t.data),i(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error al obtener comentario/rating por su ID",e.t0),401===e.t0.response.status&&(K.a.fire({icon:"error",title:"Su sesi\xf3n ha expirado. Debe volver a iniciar sesi\xf3n.",showConfirmButton:!1,timer:2e3}),setTimeout((function(){I()}),2100));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var t=Object(k.a)(g.a.mark((function t(r){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M("cr/create",Object(v.a)(Object(v.a)({},r),{},{bookId:"".concat(x)}),"POST");case 3:K.a.fire({icon:"success",title:"Comentario/Rating registrado con \xe9xito",showConfirmButton:!1,timer:2e3}),setTimeout((function(){e.push("/user/books")}),2100),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error al crear comentario/rating",t.t0),401===t.t0.response.status&&(K.a.fire({icon:"error",title:"Su sesi\xf3n ha expirado. Debe volver a iniciar sesi\xf3n.",showConfirmButton:!1,timer:2e3}),setTimeout((function(){I()}),2100));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),A=function(){var t=Object(k.a)(g.a.mark((function t(r){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Value del updateCR",r),t.prev=1,t.next=4,M("cr/edit/".concat(h.cr._id),Object(v.a)(Object(v.a)({},r),{},{_id:h.cr._id}),"PUT");case 4:n=t.sent,console.log("Respuesta al actualizar CR",n),K.a.fire({icon:"success",title:"El Comentario/Rating fue modificado",showConfirmButton:!1,timer:2e3}),setTimeout((function(){e.push("/user/books")}),2100),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),console.log("Error al modificar el libro",t.t0),401===t.t0.response.status&&(K.a.fire({icon:"error",title:"Su sesi\xf3n ha expirado. Debe volver a iniciar sesi\xf3n.",showConfirmButton:!1,timer:2e3}),setTimeout((function(){I()}),2100));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){(null===l||void 0===l?void 0:l._id)||e.push("/login")}),[l,e]),Object(n.useEffect)((function(){l&&"basic"===l.role?p():e.push("/login")}),[x]);var I=function(){d(null),localStorage.removeItem("biblioteca-app"),e.push("/login")},S=function(e){return null===(null===e||void 0===e?void 0:e.cr)?{bookImageUrl:e.libro.bookImageUrl,title:e.libro.title,author:e.libro.author,rating:0,comment:""}:{bookImageUrl:null===e||void 0===e||null===(t=e.libro)||void 0===t?void 0:t.bookImageUrl,title:null===e||void 0===e||null===(r=e.libro)||void 0===r?void 0:r.title,author:null===e||void 0===e||null===(n=e.libro)||void 0===n?void 0:n.author,rating:null===e||void 0===e||null===(a=e.cr)||void 0===a?void 0:a.rating,comment:null===e||void 0===e||null===(i=e.cr)||void 0===i?void 0:i.comment};var t,r,n,a,i};return console.log("Probando la funci\xf3n",S(h)),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(C.a,{justify:"center",children:Object(o.jsxs)(y.a,{span:22,children:[Object(o.jsxs)("p",{className:"text-end",children:["Hola, ",null===l||void 0===l?void 0:l.firstName]}),Object(o.jsx)(w.a,{type:"primary",danger:!0,className:"float-end",onClick:I,children:"Cerrar sesi\xf3n"}),Object(o.jsx)("br",{}),Object(o.jsx)(w.a,{type:"primary",className:"d-block",onClick:function(){return e.push("/user/books")},children:"Lista de libros"})]})}),a?Object(o.jsx)(ge,{processSubmit:null===(null===h||void 0===h?void 0:h.cr)?O:A,initialValues:S(h),titleButton:null===(null===h||void 0===h?void 0:h.cr)?"Crear":"Actualizar"}):Object(o.jsx)("h1",{children:"Cargando..."})]})},ke=r(366),Ie=r(369),Ce=r(377),ye=r(225),we=r.n(ye),Se=r(184),Ne=r.n(Se),Ee=(r(352),function(){var e,t=Object(n.useState)([]),r=Object(s.a)(t,2),a=r[0],i=r[1],c=Object(n.useState)(!1),l=Object(s.a)(c,2),d=l[0],b=l[1],m=Object(n.useContext)(u),f=m.user,x=m.setUser,p=Object(n.useState)(1),O=Object(s.a)(p,2),A=O[0],E=O[1],B=Object(n.useState)(6),T=Object(s.a)(B,2),F=T[0],P=T[1],Q=Object(n.useState)({}),L=Object(s.a)(Q,2),H=L[0],z=L[1],J=Object(j.f)(),R=function(){var e=Object(k.a)(g.a.mark((function e(){var t,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M("books/user/crs");case 3:t=e.sent,console.log("Todos los libros",t.data),r=t.data.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{key:q()})})),i(r),b(!0),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error al consultar todos los libros"),console.log("error",e.t0),401===e.t0.response.status&&(K.a.fire({icon:"error",title:"Su sesi\xf3n ha expirado. Debe volver a iniciar sesi\xf3n.",showConfirmButton:!1,timer:2e3}),setTimeout((function(){Y()}),2100));case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){f&&"basic"===f.role?R():J.push("/login")}),[]);var Y=function(){x(null),localStorage.removeItem("biblioteca-app"),J.push("/login")},W=[{key:q(),title:"Autor",dataIndex:"author",filters:G(a,"author").map((function(e){return{text:e,value:e}})),onFilter:function(e,t){return 0===t.author.indexOf(e)}},{key:q(),title:"T\xedtulo",dataIndex:"title",filters:G(a,"title").map((function(e){return{text:e,value:e}})),onFilter:function(e,t){return 0===t.title.indexOf(e)}},{key:q(),title:"A\xf1o",dataIndex:"year",sorter:function(e,t){return e.year-t.year}},{key:q(),title:"Editorial",dataIndex:"publisher",filters:G(a,"publisher").map((function(e){return{text:e,value:e}})),onFilter:function(e,t){return 0===t.publisher.indexOf(e)}},{key:q(),title:"G\xe9nero",dataIndex:"subject",filters:G(a,"subject").map((function(e){return{text:e,value:e}})),onFilter:function(e,t){return 0===t.subject.indexOf(e)}},{key:q(),title:"N.\xba de p\xe1gs.",align:"right",dataIndex:"numberOfPages",sorter:function(e,t){return e.numberOfPages-t.numberOfPages}},{key:q(),title:"Img",dataIndex:"bookImageUrl",render:function(e){return Object(o.jsx)(I.a,{height:60,src:e||D})}},{key:q(),title:"Rating",width:"15%",defaultSortOrder:"descend",sorter:function(e,t){return e.avgRating-t.avgRating},render:function(e){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(le.a,{allowHalf:!0,disabled:!0,defaultValue:null===e.avgRating?0:e.avgRating}),1===e.comments.length?Object(o.jsxs)("p",{className:"text-center text-danger",children:[e.comments.length," rese\xf1a"]}):e.comments.length>1?Object(o.jsxs)("p",{className:"text-center text-danger",children:[e.comments.length," rese\xf1as"]}):Object(o.jsx)("p",{className:"text-center text-secondary",children:"Sin rese\xf1as"})]})}},{key:q(),title:"Acciones",render:function(e){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(U.a,{style:{color:"#F18F01",marginLeft:5,fontSize:18},onClick:function(){J.push("/user/book/".concat(e._id))}}),Object(o.jsx)(Ce.a,{style:{color:"#3590ff",marginLeft:8,fontSize:22},onClick:function(){return ee(e)}})]})}}],V=function(){var e=Object(k.a)(g.a.mark((function e(t){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M("cr/book/".concat(t._id));case 3:r=e.sent,z(r.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("eError al consultar todos los libros",e.t0),401===e.t0.response.status&&(K.a.fire({icon:"error",title:"Su sesi\xf3n ha expirado. Debe volver a iniciar sesi\xf3n.",showConfirmButton:!1,timer:2e3}),setTimeout((function(){Y()}),2100));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Z=Object(n.useState)(!1),X=Object(s.a)(Z,2),_=X[0],$=X[1],ee=function(e){$(!0),V(e)};return Object(o.jsxs)(h.a,{className:"m-3 mx-auto",children:[Object(o.jsx)(C.a,{children:Object(o.jsxs)(y.a,{span:22,children:[Object(o.jsxs)("p",{className:"text-end",children:["Hola, ",null===f||void 0===f?void 0:f.firstName]}),Object(o.jsx)(w.a,{type:"primary",danger:!0,className:"float-end",onClick:Y,children:"Cerrar sesi\xf3n"}),Object(o.jsx)("br",{})]})}),Object(o.jsx)(C.a,{justify:"center",children:Object(o.jsxs)(y.a,{span:22,children:[Object(o.jsx)("h2",{className:"text-center",children:"Lista de Libros"}),d&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{children:[Object(o.jsx)("p",{className:we.a.registeredBooks,children:"Total de libros registrados"}),Object(o.jsx)(S.a,{count:a.length,showZero:!0})]}),Object(o.jsx)(N.a,{columns:W,dataSource:a,onChange:function(e,t,r){console.log("Table params",e,t,r)},pagination:{showSizeChanger:!0,current:A,pageSize:F,onChange:function(e,t){E(e),P(t)}}})]})]})}),Object(o.jsx)(ke.a,{title:"Comentarios de los usuarios",visible:_,onOk:function(){$(!1)},onCancel:function(){$(!1)},children:Object(o.jsx)(Ie.a,{children:null===H||void 0===H||null===(e=H.comments)||void 0===e?void 0:e.map((function(e){var t;return Object(o.jsxs)(Ie.a.Item,{children:[Object(o.jsx)("span",{children:Object(o.jsxs)("b",{children:[" Comentario de ",null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.firstName,":"]})}),Object(o.jsx)("br",{}),Object(o.jsx)(le.a,{allowHalf:!0,disabled:!0,defaultValue:null===e||void 0===e?void 0:e.rating}),Object(o.jsxs)("p",{children:['"',Object(o.jsx)("em",{children:null===e||void 0===e?void 0:e.comment}),'"',Object(o.jsx)("br",{}),"Publicado ",Ne()(null===e||void 0===e?void 0:e.updatedAt).fromNow()]})]},q())}))})})]})}),Be=function(){return Object(o.jsxs)(b.a,{children:[Object(o.jsx)(O,{}),Object(o.jsxs)(j.c,{children:[Object(o.jsx)(j.a,{exact:!0,path:"/login",children:Object(o.jsx)(xe,{})}),Object(o.jsx)(j.a,{exact:!0,path:"/register",children:Object(o.jsx)(xe,{})}),Object(o.jsx)(j.a,{exact:!0,path:"/admin/books",children:Object(o.jsx)(J,{})}),Object(o.jsx)(j.a,{exact:!0,path:"/admin/book/new",children:Object(o.jsx)(ee,{})}),Object(o.jsx)(j.a,{exact:!0,path:"/admin/book/edit/:id",children:Object(o.jsx)(ee,{})}),Object(o.jsx)(j.a,{exact:!0,path:"/user/books",children:Object(o.jsx)(Ee,{})}),Object(o.jsx)(j.a,{exact:!0,path:"/user/book/:id",children:Object(o.jsx)(ve,{})}),Object(o.jsx)(b.a,{exact:!0,path:"/",children:Object(o.jsx)(be,{})})]})]})};var Te=function(){return Object(o.jsx)(l,{children:Object(o.jsx)(d,{children:Object(o.jsx)(Be,{})})})};r(353),r(354);i.a.render(Object(o.jsx)(Te,{}),document.getElementById("root"))}},[[355,1,2]]]);
//# sourceMappingURL=main.04da27ed.chunk.js.map